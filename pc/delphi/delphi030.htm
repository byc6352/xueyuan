<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PCM数据格式 - cyq129445的博客 - CSDN博客</title>
  <link href="images/style.css" rel="stylesheet">
</head>

<body class="stackedit"><div class="stackedit__html">

<div class="article_content clearfix" id="article_content" style="overflow: hidden;">
                                                <div class="article-copyright">
                <span class="creativecommons">
                <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license">
                    </a>
            <span>
                版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。            </span>
               <div class="article-source-link2222">
                    本文链接：<a href="https://blog.csdn.net/cyq129445/article/details/80190579">https://blog.csdn.net/cyq129445/article/details/80190579</a>
                </div>
            </span>
                    </div>
                                                    <!--一个博主专栏付费入口-->
             
             <!--一个博主专栏付费入口结束-->
            <link href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css" rel="stylesheet">
                                        <link href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css" rel="stylesheet">
                <div class="htmledit_views" id="content_views">
                                            <span></span><blockquote style="margin: 0px 0px 0px 40px; padding: 0px; border: currentColor; border-image: none;"><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'><strong>1. 音频简介</strong></span></div></blockquote><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; &nbsp;经常见到这样的描述: 44100HZ 16bit stereo 或者 22050HZ 8bit mono 等等.</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; &nbsp;44100HZ 16bit stereo: 每秒钟有 44100 次采样, 采样数据用 16 位(2字节)记录, 双声道(立体声);</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; &nbsp;22050HZ 8bit&nbsp; mono: 每秒钟有 22050 次采样, 采样数据用 8 位(1字节)记录, 单声道;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; 当然也可以有 16bit 的单声道或 8bit 的立体声, 等等。</span><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; 采样率是指：声音信号在“模→数”转换过程中单位时间内采样的次数。采样值是指每一次采样周期内声音模拟信号的积分值。</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><br></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; &nbsp;对于单声道声音文件，采样数据为八位的短整数（short int 00H-FFH）；</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; &nbsp;而对于双声道立体声声音文件，每次采样数据为一个16位的整数（int），高八位(左声道)和低八位(右声道)分别代表两个声道。</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; 人对频率的识别范围是 20HZ - 20000HZ, 如果每秒钟能对声音做 20000 个采样, 回放时就足可以满足人耳的需求. 所以 22050 的采样频率是常用的, 44100已是CD音质, 超过48000的采样对人耳已经没有意义。这和电影的每秒 24 帧图片的道理差不多。</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; 每个采样数据记录的是振幅, 采样精度取决于储存空间的大小:</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp;1 字节(也就是8bit) 只能记录 256 个数, 也就是只能将振幅划分成 256 个等级;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp;2 字节(也就是16bit) 可以细到 65536 个数, 这已是 CD 标准了;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp;4 字节(也就是32bit) 能把振幅细分到 4294967296 个等级, 实在是没必要了.</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp;如果是双声道(stereo), 采样就是双份的, 文件也差不多要大一倍.</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>这样我们就可以根据一个 wav 文件的大小、采样频率和采样大小估算出一个 wav 文件的播放长度。</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>譬如 "Windows XP 启动.wav" 的文件长度是 424,644 字节, 它是 "22050HZ / 16bit / 立体声" 格式(这可以从其 "属性-&gt;摘要" 里看到),</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>那么它的每秒的传输速率(位速, 也叫比特率、取样率)是 22050*16*2 = 705600(bit/s),&nbsp;</span><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>换算成字节单位就是 705600/8 = 88200(字节/秒),&nbsp;</span></div><div><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>播放时间：424644(总字节数) / 88200(每秒字节数) ≈ 4.8145578(秒)。</span></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>但是这还不够精确, 包装标准的 PCM 格式的 WAVE 文件(*.wav)中至少带有 42 个字节的头信息, 在计算播放时间时应该将其去掉,&nbsp;</span></div><div><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>所以就有：(424644-42) / (22050*16*2/8) ≈ 4.8140816(秒). 这样就比较精确了.</span></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>关于声音文件还有一个概念: "位速", 也有叫做比特率、取样率, 譬如上面文件的位速是 705.6kbps 或 705600bps, 其中的 b 是 bit, ps 是每秒的意思;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>压缩的音频文件常常用位速来表示, 譬如达到 CD 音质的 MP3 是: 128kbps / 44100HZ.</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><br></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><br></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;&nbsp;&nbsp;</span></div><blockquote style="margin: 0px 0px 0px 40px; padding: 0px; border: currentColor; border-image: none;"><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'><strong>2. PCM数据格式</strong></span></div></blockquote><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; PCM(Pulse Code Modulation)也被称为 脉码编码调制。PCM中的声音数据没有被压缩，如果是单声道的文件，采样数据按时间的先后顺序依次存入。(它的基本组织单位是BYTE(8bit)或WORD(16bit))</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; 一般情况下，一帧PCM是由2048次采样组成的</span><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>( 参&nbsp;</span><a style='color: rgb(68, 68, 68); font-family: "Courier New"; font-size: 12pt;' href="http://discussion.forum.nokia.com/forum/showthread.php?129458-%E8%AF%B7%E9%97%AEPCM%E6%A0%BC%E5%BC%8F%E7%9A%84%E9%9F%B3%E9%A2%91%E6%B5%81%EF%BC%8C%E6%AF%8F%E6%AC%A1%E8%AF%BB%E5%85%A5%E6%88%96%E8%BE%93%E5%87%BA%E7%9A%84%E5%9D%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%98%AF%E5%BF%85%E9%A1%BB%E5%9B%BA%E5%AE%9A%E4%B8%BA4096B%E4%B9%88&amp;s=e79e9dd1707157281e3725a163844c49" rel="nofollow" data-token="92389b809afaf51d50137ce757251a66">http://discussion.forum.nokia.com/forum/showthread.php?129458-请问PCM格式的音频流，每次读入或输出的块的大小是必须固定为4096B么&amp;s=e79e9dd1707157281e3725a163844c49</a><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;)。</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp; 如果是双声道的文件，采样数据按时间先后顺序交叉地存入。如图所示:</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;&nbsp;</span><img style="border: 0px currentColor; border-image: none;" alt="" src="images/delphi03001.gif"></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><div><br></div><div><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp; &nbsp;PCM的每个样本值包含在一个整数i中，i的长度为容纳指定样本长度所需的最小字节数。</span></div></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>首先存储低有效字节，表示样本幅度的位放在i的高有效位上，剩下的位置为0，这样8位和16位的PCM波形样本的数据格式如下所示。</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14.44px;">&nbsp;</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;&nbsp;&nbsp;&nbsp;样本大小&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 数据格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最小值&nbsp;&nbsp;&nbsp; 最大值</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14.44px;"><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;&nbsp;&nbsp; 8位PCM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 225</span></div><div style="margin: 5px auto; padding-top: 0px; padding-bottom: 0px; font-size: 14px;"><div><span style='color: rgb(51, 51, 51); font-family: "Courier New"; font-size: 12pt;'>&nbsp;&nbsp;&nbsp; 16位PCM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -32767&nbsp;&nbsp;&nbsp; 32767</span></div></div><br>                                    </div>
                    </div>


</div>


</body></html>